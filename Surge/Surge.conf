[General]
# General
http-listen = 0.0.0.0:8888
socks5-listen = 0.0.0.0:8889
external-controller-access = tutu@0.0.0.0:6170
# Lateracy
internet-test-url = http://cp.cloudflare.com/generate_204
proxy-test-url = http://cp.cloudflare.com/generate_204
test-timeout = 3
ipv6 = true
ipv6-vif = auto
show-error-page-for-reject = true
# Advanced
loglevel = notify
exclude-simple-hostnames = true
use-default-policy-if-wifi-not-primary = false
force-http-engine-hosts = %APPEND% boxjs.com, boxjs.net
always-real-ip = *.lan, cable.auth.com, *.msftconnecttest.com, *.msftncsi.com, *.*.*.srv.nintendo.net, *.*.stun.playstation.net, xbox.*.*.microsoft.com, *.*.xboxlive.com, stun.*, localhost.ptlogin2.qq.com, *.logon.battlenet.com.cn, *.logon.battle.net, *.blzstatic.cn, music.163.com, *.music.163.com, *.126.net, musicapi.taihe.com, music.taihe.com, songsearch.kugou.com, trackercdn.kugou.com, *.kuwo.cn, api-jooxtt.sanook.com, api.joox.com, joox.com, y.qq.com, *.y.qq.com, streamoc.music.tc.qq.com, mobileoc.music.tc.qq.com, isure.stream.qqmusic.qq.com, dl.stream.qqmusic.qq.com, aqqmusic.tc.qq.com, amobile.music.tc.qq.com, *.xiami.com, *.music.migu.cn, music.migu.cn, proxy.golang.org, *.mcdn.bilivideo.cn, *.cmpassport.com, id6.me, open.e.189.cn, mdn.open.wo.cn, auth.wosms.cn, *.jegotrip.com.cn, *.icitymobile.mobi, *.pingan.com.cn, *.cmbchina.com, pool.ntp.org, *.pool.ntp.org, ntp.*.com, time.*.com, ntp?.*.com, time?.*.com, time.*.gov, time.*.edu.cn, *.ntp.org.cn, PDC._msDCS.*.*, DC._msDCS.*.*, GC._msDCS.*.*
# DNS
hijack-dns = *:53
dns-server = 119.29.29.29, 223.5.5.5, system
read-etc-hosts = true
doh-skip-cert-verification = false
encrypted-dns-server = https://dns.alidns.com/dns-query
encrypted-dns-follow-outbound-mode = true
# > 跳过代理
skip-proxy = localhost, *.local, passenger.t3go.cn, e.crashlytics.com, captive.apple.com, app.yinxiang.com, injections.adguard.org, local.adguard.org, cable.auth.com, yunbusiness.ccb.com, 10.0.0.0/8, 100.64.0.0/10, 127.0.0.1/32, 169.254.0.0/16, 172.16.0.0/12, 192.168.0.0/16, 224.0.0.0/4, 240.0.0.0/4, ::1/128, fc00::/7, fd00::/8, fe80::/10, ff00::/8, 2001::/32, 2001:db8::/32, 2002::/16, ::ffff:0:0:0:0/1, ::ffff:128:0:0:0/1
# Others
allow-wifi-access = false
hide-vpn-icon = true
allow-hotspot-access = true
# network-framework = true
http-api = tutu@0.0.0.0:2500
http-api-web-dashboard = true
all-hybrid = false
wifi-access-http-port = 1314

[Replica]
# 0 为关闭，1 为开启
# > 隐藏 Apple 请求
hide-apple-request = 0
# > 隐藏崩溃追踪器请求
hide-crash-reporter-request = 1
# > 隐藏 UDP 会话
hide-udp = 0
# > 关键词过滤器
# none（关闭关键词过滤器） / whitelist（blacklist（仅记录包含关键字的请求）） / blacklist（仅记录不包含关键字的请求） / pattern（匹配通配符的请求）
# keyword-filter-type = none
# > 关键词
# keyword-filter = (null)

[Proxy Group]
# > 这是一个final规则 没有命中的连接会走以下的策略组
🚀 国外流量 = select, policy-path=https://sub.store/download/collection/Surge5?target=Surge, update-interval=0
# > 以下是策略组 需先配置好sub-store使用
🇭🇰 香港节点 = select, policy-path=https://sub.store/download/collection/Surge5?target=Surge, update-interval=43200, policy-regex-filter=港|🇭🇰|香港|HK|Hong
🇨🇳 台湾节点 = select, policy-path=https://sub.store/download/collection/Surge5?target=Surge, update-interval=43200, policy-regex-filter=台|🇨🇳|台湾|TW|Tai
🇯🇵 日本节点 = select, policy-path=https://sub.store/download/collection/Surge5?target=Surge, update-interval=43200, policy-regex-filter=日|🇯🇵|日本|JP|Japan
🇸🇬 新加坡节点 = select, policy-path=https://sub.store/download/collection/Surge5?target=Surge, update-interval=43200, policy-regex-filter=坡|🇸🇬|新加坡|狮城|SG|Singapore
🇺🇸 美国节点 = select, policy-path=https://sub.store/download/collection/Surge5?target=Surge, update-interval=43200, policy-regex-filter=美|🇺🇸|美国|US|States|American
🍎 苹果服务 = select, 🎯 国内流量, 🇭🇰 香港节点, 🇨🇳 台湾节点, 🇸🇬 新加坡节点, 🇯🇵 日本节点, 🇺🇸 美国节点
🚅 SpeedTest = select, 🎯 国内流量, 🚀 国外流量
📲 Telegram = select, 🇭🇰 香港节点, 🇨🇳 台湾节点, 🇸🇬 新加坡节点, 🇯🇵 日本节点, 🇺🇸 美国节点, 🚀 国外流量
📹 YouTube = select, 🇭🇰 香港节点, 🇨🇳 台湾节点, 🇸🇬 新加坡节点, 🇯🇵 日本节点, 🇺🇸 美国节点, 🚀 国外流量
🎯 国内流量 = select, DIRECT, hidden=1
🌍 国外媒体 = select, 🚀 国外流量, 🇭🇰 香港节点, 🇨🇳 台湾节点, 🇯🇵 日本节点, 🇸🇬 新加坡节点, 🇺🇸 美国节点
🪁 Google = select, 🇺🇸 美国节点
# > 这是你的机场链接填写的地方 在policy_path=后面粘贴你自己机场的订阅链接🔗（不要在这里粘贴 谢谢）

[Rule]
RULE-SET,https://github.com/VirgilClyne/GetSomeFries/raw/main/ruleset/HTTPDNS.Block.list,DIRECT
DOMAIN-SUFFIX,appstorrent.ru,DIRECT
# > Safari 防跳转
DOMAIN,app-site-association.cdn-apple.com,REJECT
# ban UDP on Youtube
AND,((PROTOCOL,UDP), (DOMAIN-SUFFIX,googlevideo.com)),REJECT-NO-DROP
# ban National Anti-fraud Center
DOMAIN,prpr.96110.cn.com,DIRECT
DOMAIN-KEYWORD,96110,REJECT
DOMAIN-SUFFIX,gjfzpt.cn,REJECT
# > Vercel --> sub-store
DOMAIN-SUFFIX,vercel.app,🚀 国外流量
# > Direct(Google|Proxy|Download|Spotify)
RULE-SET,https://raw.githubusercontent.com/bunizao/TutuBetterRules/tutu/RuleList/DOMAlN/Direct.list,DIRECT
# > Mail
DOMAIN-SUFFIX,smtp,DIRECT
URL-REGEX,(Subject|HELO|SMTP),DIRECT
# > Unbreak 后续规则修正
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Unbreak.list,DIRECT
# > Advertising 广告拦截
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Advertising.list,REJECT-TINYGIF
DOMAIN-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/AdvertisingPlus.list,REJECT
# > 🆕 拒绝国家反诈中心请求
DOMAIN-SUFFIX,gjfzpt.cn,REJECT
# > Privacy 隐私保护
# RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Privacy.list,REJECT-TINYGIF
# > 规则们的party
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Hijacking.list,REJECT-TINYGIF
# > Stream Media
RULE-SET,https://raw.githubusercontent.com/bunizao/TutuBetterRules/tutu/RuleList/DOMAlN/Telegram.list,📲 Telegram
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Speedtest/Speedtest.list,🚅 SpeedTest
# > Youtube & Google Search
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/YouTube/YouTube.list,📹 YouTube
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GoogleSearch/GoogleSearch.list,📹 YouTube
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Google/Google.list,🪁 Google
# > Apple
RULE-SET,https://raw.githubusercontent.com/bunizao/TutuBetterRules/tutu/RuleList/DOMAlN/Apple_Direct.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/AppleNews/AppleNews.list,🇺🇸 美国节点
RULE-SET,https://raw.githubusercontent.com/bunizao/TutuBetterRules/tutu/RuleList/DOMAlN/Apple_Proxy.list,DIRECT
# RULE-SET,https://raw.githubusercontent.com/bunizao/TutuBetterRules/tutu/RuleList/DOMAlN/iCloudPrivateRelay.list,🚀 国外流量 // iCloud Private Relay：MacOS上的Surge网关才能用 iOS不需要请禁用。
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Apple/Apple.list,🍎 苹果服务
# > Github代理
RULE-SET,https://raw.githubusercontents.com/blackmatrix7/ios_rule_script/master/rule/Surge/GitHub/GitHub.list,🚀 国外流量
# > Streaming 国际流媒体服务
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Streaming.list,🌍 国外媒体
# > Global 全球加速
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Global.list,🚀 国外流量
# > China 中国直连
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/China.list,DIRECT
# > Local Area Network 局域网
RULE-SET,LAN,DIRECT
# > 兜底规则
FINAL,DIRECT,dns-failed
# 应用代理
# pikpak
DOMAIN-SUFFIX,mypikpak.com,🚀 国外流量 // Added for: api-drive.mypikpak.com:443

[Host]
*.taobao.com = server:223.5.5.5
*.tmall.com = server:223.5.5.5
*.alipay.com = server:223.5.5.5
*.alicdn.com = server:223.5.5.5
*.aliyun.com = server:223.5.5.5
*.jd.com = server:119.28.28.28
*.qq.com = server:119.28.28.28
*.tencent.com = server:119.28.28.28
*.weixin.com = server:119.28.28.28
*.bilibili.com = server:119.29.29.29
hdslb.com = server:119.29.29.29
*.163.com = server:119.29.29.29
*.126.com = server:119.29.29.29
*.126.net = server:119.29.29.29
*.127.net = server:119.29.29.29
*.netease.com = server:119.29.29.29
*.mi.com = server:119.29.29.29
*.xiaomi.com = server:119.29.29.29
dl.google.com = server:119.29.29.29
dl.l.google.com = server:119.29.29.29
update.googleapis.com = server:119.29.29.29
mtalk.google.com = 108.177.125.188
*testflight.apple.com = server:8.8.4.4
# > Router Admin Panel
router.asus.com = server:syslib // Asus Router
tplogin.cn = server:syslib // TP-Link Router
tplinklogin.net = server:syslib // TP-Link Router

[URL Rewrite]
# > 有两种重定向方式: 'header' 和 '302'
# > 建议用模块 header
# > ReDIRECT Google Search Service
^(http|https):\/\/(www.)?(g|google)\.cn https://www.google.com 302
# AbeamTV Unlock header
^https?:\/\/api\.abema\.io\/v\d\/ip\/check - reject
# ReDIRECT Google Service
^https?:\/\/(www.)?g\.cn https://www.google.com 302
^https?:\/\/(www.)?google\.cn https://www.google.com 302
# ReDIRECT HTTP to HTTPS
^https?:\/\/(www.)?taobao\.com\/ https://www.taobao.com/ 302
^https?:\/\/(www.)?jd\.com\/ https://www.jd.com/ 302
^https?:\/\/(www.)?mi\.com\/ https://www.mi.com/ 302
^https?:\/\/you\.163\.com\/ https://you.163.com/ 302
^https?:\/\/(www.)?suning\.com/ https://suning.com/ 302
^https?:\/\/(www.)?yhd\.com https://yhd.com/ 302

[MITM]
skip-server-cert-verify = true
tcp-connection = true
h2 = true
hostname = sub.store
ca-passphrase = 481C5F00
ca-p12 = MIIKPAIBAzCCCgYGCSqGSIb3DQEHAaCCCfcEggnzMIIJ7zCCBF8GCSqGSIb3DQEHBqCCBFAwggRMAgEAMIIERQYJKoZIhvcNAQcBMBwGCiqGSIb3DQEMAQYwDgQIptZQXj/6ZiwCAggAgIIEGFwZ+dC/D6td4LZYggVPgA6+oFIyhdcefgHYdDV0e8393roa1bFzF16RZfa++zOLJZ1OUgXZrdvoWF03vtISTBrGCckhgFZEjErS2OD6IDEY7G5drV565IcR/ouxCVuOpq9VLK/BzUjNrTFjLbDi9nULoj5tDXbq22oz/4stRE7PBpR/ApMCh0aSXznx6vVUxJJPQB9I3chqcFaOzJSnv7N8l8dC8IIcc5Bqj15CBW7vgSRgIG2hYnR1dG3Ml889I3Advqep7m1xc8yMTGR31BllCNiIKsYdbvvdR6OEEsFu+bP8+SYEQoRGrsp7s+7UWWgOCdu0C1UILGPCWZXFI+itJlzOctuIX/qjpwmQamfAw7ArRYEymc/gX6bTv3txfpwtPQSoKyScmusfzHUf2jesjGlo8/sUBEpyOjYlmMMVjbi5OdNBC5fL9YUa1zkuPF2tcPWAd3M52WvXJVtb1/xtYIkKW5XoJlfur6wzvEOuBJomppXIWJ2D4FArVyDXBLbiRc4Yg/vma2+maIUjKtX73/cYrZ51+m37PEhm5paG2W15soFqY2xMErrzd+GT0mkVfyxA01htHozYr0DogfqkMd33roelTwEph6oseLNaVsLhPIFjna4jEyPeJelIy+LbgQVxIms5Ut3f4kjRLyGMom0iBixU5QCAQ3jMnlaizU8tqtrEPgBMoC6vfHgojzBvr6LLY/bXBGlpau/d/z8NQeqwaYii4LhK8q7fOUhLza5QTRgBYIfkou0BRmVpJEerX0wvtT7Cq7H9lbO+NisCePctPY6beFTov2HY0S3mSYsRmUbqEFJopdgn/VQwLSMvrh/8bAhXHTMZVQbhnl8jbZRqJRrRKawY45RCnhPHOyOXqsNR9Dql7Z8cOiRyITX57IbTYLIqX7LZGpXrkDKml2n+7q+F0VY5948CeQet4GjiNjmRChXPoE8QoDB6xWcd2fOPJiKNuxwg3zw6/fqPMVNcVz/iYRfAr32nEagJ/YD6/FgKrYMi4wJ+OY+r4IrcKHq7qqxQp+Keql2aM80cgvfNUqhcmACISTgfC5yjOV7csa07Dqqk273drl74FzUpeEMhzvWcxpzhfEW2kvfOnxJ9OpzIgbU6chuP6fUUUS2TSwTEtWFDrYQqTbNduqoYVooiFP4iibotWgZF8SJ1hK9yKEDhcyTS/oZj74yh4gOBfb+S6ozUEtQ02U99AqtbNziOh4zNPgCtr+GLjcZf7+RE3Mc7oqDbbEHZx8ZzeqLyWe/bBdrqZ3hEYbmedRoaAjxlU1wONvtZwcXwwJGl0goTnEY+eBl+Z76iHX1lwbZAPdPpkZse/6HC2DGh+ZgrJig/z+1sIZyXP4dP2GftlVUhpugus2+UDViMawM1xoNJ8lefm1gwggWIBgkqhkiG9w0BBwGgggV5BIIFdTCCBXEwggVtBgsqhkiG9w0BDAoBAqCCBO4wggTqMBwGCiqGSIb3DQEMAQMwDgQIWRNpPdyQiV4CAggABIIEyKXhO2fRH2Sw5nRWW4kAvAX6RWqALpMNc8bL/Oia8YrjcB1fGPCMFpymC2Xy4xXAHeE9J9Zmw4Q9BZXkfQ+YDGwzP6S/omvRFogMKn15+PYKp2cM45Xx9f4FciHwLd98iUG8ebjzMgK7WmBvQQIOR2e58GlMoApEOxh5phUjhc7800ycLySA6FGtSrXs8LbnAAaklmp/Y7ytHjyO7QMlTFG51IjIHBBHwD13KtVf9dY0oxxShqIU5FX8GkmK4r1u2lFT7F1TiY1R07MOnweHBGqwg5Irr0yxOt6WAWMSG1yx48O5l1lnv/8B3VD01m1pf/s/fCnC9eIngm2SJ2u3BilrKJbPqnA/pc1r9EKv96b0JrHy0hmjZ1HWe0GJkSmOAoqkbvTkDPfS7ECp9umFrkxrgJk9/v2Qg4XkGoKs/73W8K3xMfWsa4UOAVaJW1rvfie4b7oArs1ujbfPKTKTXXu01GGQy2/EuxdY42Dicpqenez7YiOcp/9IML4QDrI0T0VL+qs6UBiQlnQSl/QIgVDyau/8w2oPGE3ivS6Xfn8pt6PStM3UUTJ8E09Kr6eaCmpTNMTFiDvru3vW12jB6aZnVz0mZ6dpZa5gKmL7LCR1k0RfeGJhygHkyKENRaZSySncTAri/KYpy6Ao4v917aZ73Fy/m28CTc4Wkms78roE/ip0VgjY8W35RZftEZijU7z7L16bUKh20HznBcMzpQG7eNvP3IXQ6MlVO4/OEH3depMeMu4jySPQACw2VTPeR5tj32kCb7Ptn54wSYsGXTOM6mB89dw5lnXw58bb2Z987GxBLl4UXeI35TiWAXq8YfZ4Cs9/06k/JKl9sbeNwapIw9uovcFa2s9XeptAoa3dsTItL1Qy6Y3VGJ5XDR3fVafZa2uAdtOrUacOsIf9CEO+of6JlOtE31s7MAtaLBehXAmB/+zUrXlDxkzEgLzhKrGqkzU9Qx3EiFsUgxDtb5L3zb2+YY0PhdKDmUlWApDB/UT5nrI/0ka1SShC6fk1n9qRseQTIaf9xQmQJCakVihNBCp5HpedF1JGAoENXJJmXXZlYZxFw56JSw3feryrWdTEB178+5H9r7QQcJgHtQYFdASc+cREF7y/3dMdJxCjhlCeTQUZxnTL3Hfp7I8O6kkDjrFw5meHzvZsddkxEEkW12AW6Q7bDO7s+4BGXO3qMZ6X9oxFWJeYkO5NlcjgKTP5ARAx3VIdTcLEs+vx1STAe4VYzMa0D32RCMQ9w8PQWiUbr4ozebUKPyyKTjKjp8OYbUwedipEEhEAjZ14i4F0QcSWiq94tawcLHIEGIxIvAyC30eLR3CqHyoDuK1FKaSD9ImzZW7noQZZQQzDEEj4tDmwqfyAmz+296RgenzdYyGo+nJcKI+RuyqeR12iuoyDqJsKDQeP/fm5pSPJStwYK5GsYN/Sk1BS/Y5VSdzT6fdkc6qmKEKX4DJY9R+wS6V0SJnafdr9xm90k2hAPVx4wMF4dPn6lbGGweYp7zsvUInrMfT+u0W7MezCJpol9n9CaPTfYTB8sYKOsYXWEBmDj3JxzoFd7AMBbyZikCAa2vVlcyndXgJcI/q2SrM6lH1NAJZh9tW2563eWmwVIu6sxLeqxo+BPjFsMCMGCSqGSIb3DQEJFTEWBBSVZ7fOvkXW0eZYNm4OvZgSk+iEfjBFBgkqhkiG9w0BCRQxOB42AFMAdQByAGcAZQAgAEcAZQBuAGUAcgBhAHQAZQBkACAAQwBBACAANAA4ADEAQwA1AEYAMAAwMC0wITAJBgUrDgMCGgUABBSgrNflw2DLZS2hiG1iQcnX2k5hZQQIrc0sz+dYk+Y=

[Script]
Sub-Store Core = type=http-request,pattern=^https?:\/\/sub\.store\/((download)|api\/(preview|sync|(utils\/node-info))),script-path=https://git.iqiq.io/sub-store-org/Sub-Store/releases/latest/download/sub-store-1.min.js,requires-body=true,timeout=120,ability=http-client-policy
Sub-Store Simple = type=http-request,pattern=^https?:\/\/sub\.store,script-path=https://git.iqiq.io/sub-store-org/Sub-Store/releases/latest/download/sub-store-0.min.js,requires-body=true
Sub-Store Sync = type=cron,cronexp=0 0 * * *,wake-system=1,timeout=120,script-path=https://git.iqiq.io/sub-store-org/Sub-Store/releases/latest/download/cron-sync-artifacts.min.js
Rewrite: BoxJs = type=http-request,pattern=https?:\/\/boxjs\.(com|net),script-path=https://raw.githubusercontent.com/chavyleung/scripts/master/box/chavy.boxjs.js,requires-body=true,timeout=120

